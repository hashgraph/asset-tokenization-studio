// SPDX-License-Identifier: Apache-2.0

/**
 * ATS-specific contract registry.
 *
 * This module provides the ATS contract registry with type-safe helper functions.
 * It uses the generic registry factory from infrastructure and provides the
 * ATS-generated registry data.
 *
 * The registry data is auto-generated by `generateRegistryPipeline` from the
 * contracts/ directory. To regenerate: `npm run generate:registry`
 *
 * @module domain/atsRegistry
 *
 * @example
 * ```typescript
 * import {
 *     getFacetDefinition,
 *     getStorageWrapperDefinition,
 *     ROLES
 * } from '@scripts/domain'
 *
 * // Query facets
 * const facet = getFacetDefinition('AccessControlFacet')
 * console.log(facet.methods)
 * console.log(facet.events)
 *
 * // Query storage wrappers
 * const wrapper = getStorageWrapperDefinition('AccessControlStorageWrapper')
 * console.log(wrapper.methods)
 *
 * // Access roles
 * console.log(ROLES._PAUSER_ROLE)
 *
 * // Get all facets
 * const allFacets = getAllFacets()
 * const allWrappers = getAllStorageWrappers()
 * ```
 */

// Re-export auto-generated registries and constants
export { FACET_REGISTRY, INFRASTRUCTURE_CONTRACTS, STORAGE_WRAPPER_REGISTRY, ROLES } from "./atsRegistry.data";

import { createRegistryHelpers } from "../infrastructure/registryFactory";
import { FACET_REGISTRY, INFRASTRUCTURE_CONTRACTS, STORAGE_WRAPPER_REGISTRY } from "./atsRegistry.data";

/**
 * ATS-specific registry helpers.
 *
 * These helper functions provide type-safe access to the ATS contract registry.
 * They are created using the generic factory pattern from infrastructure.
 */
export const {
  getFacetDefinition,
  getContractDefinition,
  getAllFacets,
  getAllContracts,
  hasFacet,
  hasContract,
  FACET_REGISTRY_COUNT,
  getStorageWrapperDefinition,
  getAllStorageWrappers,
  hasStorageWrapper,
  STORAGE_WRAPPER_REGISTRY_COUNT,
} = createRegistryHelpers(FACET_REGISTRY, INFRASTRUCTURE_CONTRACTS, STORAGE_WRAPPER_REGISTRY);

// Import RegistryProvider type for type annotation
import type { RegistryProvider } from "../infrastructure/types";

/**
 * ATS Registry Provider.
 *
 * Pre-configured registry provider implementing the RegistryProvider interface.
 * Use this when you need to pass a registry to infrastructure operations like
 * registerFacets, registerAdditionalFacets, or createBatchConfiguration.
 *
 * This is the canonical ATS registry that downstream projects should combine
 * with their custom registries using combineRegistries().
 *
 * @example
 * ```typescript
 * // Use directly in operations
 * import { atsRegistry, registerFacets } from '@hashgraph/asset-tokenization-contracts/scripts'
 *
 * await registerFacets(provider, {
 *     blrAddress,
 *     facets: deployedFacets,
 *     registries: [atsRegistry]
 * })
 *
 * // Combine with custom registry
 * import { atsRegistry, combineRegistries } from '@hashgraph/asset-tokenization-contracts/scripts'
 * import { customRegistry } from './myRegistry'
 *
 * const combined = combineRegistries(atsRegistry, customRegistry)
 * ```
 */
export const atsRegistry: RegistryProvider = {
  getFacetDefinition,
  getAllFacets,
};
