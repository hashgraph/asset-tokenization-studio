import {
  Story,
  Meta,
  Title,
  ArgTypes,
  Primary,
  Stories,
  Source,
} from "@storybook/addon-docs";
import { Grid, GridItem, Text, Link, Center, Flex } from "@chakra-ui/react";
import * as TableStories from "./Table.stories";

<Meta of={TableStories} />

<Title />

<a
  href="https://www.figma.com/file/YF8AvIq0MclfhGDvKgzypp/ioBricks-Design-System?type=design&node-id=2613%3A22819&mode=design&t=k4jSCm0Q182mRyVn-1"
  target="\_blank"
>
  View figma design
</a>

<Primary />

## How to set up

Table component is built on top of [TanStack Table](https://tanstack.com/table/v8)

### Config theme

Add the following configurations to the `theme.tsx` and `Table.ts` files, respectively.

```tsx dark
const theme = {
  components: {
    Table: ConfigTable,
  },
};
```

```tsx dark
const ConfigTable: TableThemeConfiguration = {
  parts: tablePartsList,
  baseStyle: {},
  sizes: {},
};
```

### Component parts

You have these parts available: `"headerContainer" | "footerText" | "header" | "cell" | "rowContainer" | "container" | "tableContainer" | "title" | "subtext" | "sortIcon" | "rowExpander" | "rowContainerExpanded" | "cellIcon" | "headerIcon"` (`tablePartsList`)

## How to use

The Table component requires the following props: name, data, and columns.

```tsx dark
<Table name="table" data={data} columns={columns} />
```

```tsx dark
const data: Data[] = [
  {
    type: "Sale",
    price: "$200.00",
    fromUser: "@Raymond",
    toUser: "@Jane",
    date: date(),
    status: "BLOCKED",
  },
  {...},
]
```

```tsx dark
import { createColumnHelper } from "@tanstack/react-table";

const columnHelper = createColumnHelper<Data>();

const columns = [
  columnHelper.accessor("type", {}),
  columnHelper.accessor("price", {
    header: () => "Price",
  }),
  columnHelper.accessor("fromUser", {
    header: "from user",
    enableSorting: false,
    meta: {
      isFocusable: false,
    },
    cell: ({ getValue }) => (
      <HoverableContent hiddenContent={<ClipboardButton value={getValue()} />}>
        {getValue().toUpperCase()}
      </HoverableContent>
    ),
  }),
  columnHelper.accessor("toUser", {
    header: "to user",
    enableSorting: false,
    cell: ({ getValue }) => (
      <MultiTextCell subtext="Text" type="upper" text={getValue()} />
    ),
  }),
  columnHelper.accessor("date", {
    header: "Date",
  }),
  columnHelper.accessor("status", {
    header: "Status",
    cell: ({ getValue }) => <Tag size="sm" label={getValue()} />,
  }),
  columnHelper.display({
    id: "action",
    header: "Action",
    cell: (props) => (
      <Button
        size="sm"
        variant="primary"
        onClick={(e) => {
          e.stopPropagation();
          console.log("button clicked");
        }}
      >
        button
      </Button>
    ),
  }),
  columnHelper.display({
    id: "decor",
    header: "-",
    cell: () => <>+</>,
  }),
];
```

## Props

<ArgTypes of={TableStories} />

## Stories

<Stories title="" />
